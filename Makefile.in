VPATH=%VPATH%

RUSTC = rustc
RUST_SRC = $(shell find $(VPATH)/src/. -type f -name '*.rs')
RC_PATH = src/rust-apl.rc
RUST_FLAGS = ""

.PHONY: all
all: rust-apl 

rust-apl: src/rust-apl.rc $(RUST_SRC)
	$(RUSTC) $(RC_PATH) $(RUSTFLAGS) -o bin/rust-apl

check: src/rust-apl.rc $(RUST_SRC)
	$(RUSTC) $(RC_PATH) $(RUSTFLAGS) -o bin/test --test && bin/test

.PHONY: clean
clean:
	rm -rf bin/*
